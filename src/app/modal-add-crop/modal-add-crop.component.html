<button class="btn flex btn-success" onclick="modal_add_crops.showModal()">
  <ng-icon name="lucideSprout" class="text-xl" /> Adicionar Cultivo
</button>

<dialog id="modal_add_crops" class="modal bg-none">
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    novalidate
    method="dialog"
    class="modal-box p-0 bg-none bg-transparent"
  >
    <fieldset
      class="fieldset bg-base-300 border-base-300 rounded-box w-full border p-6 bg-none"
    >
      <legend class="fieldset-legend text-lg font-bold mb-4">
        Adicionar Cultivo
      </legend>

      <div class="flex justify-between space-x-2">
        <div>
          <label class="label">Nome da Planta</label>
          <input
            type="text"
            class="input"
            formControlName="plant_name"
            placeholder="Nome da Planta"
          />
          <small
            *ngIf="
              form.get('plant_name')?.touched &&
              form.get('plant_name')?.hasError('required')
            "
            >Obrigatório.</small
          >
          <small
            *ngIf="
              form.get('plant_name')?.touched &&
              form.get('plant_name')?.hasError('maxlength')
            "
            >Máx 100 caracteres.</small
          >
        </div>
        <div>
          <label class="label">Origem</label>
          <select class="select" formControlName="origin_id">
            <option value="" hidden selected disabled>
              Selecione uma Origem
            </option>
            <option value="1">Semente</option>
            <option value="2">Muda</option>
            <option value="3">Estaquia</option>
          </select>
          <small
            *ngIf="
              form.get('origin_id')?.touched &&
              form.get('origin_id')?.hasError('required')
            "
            >Obrigatório.</small
          >
        </div>
      </div>

      <div class="flex justify-between space-x-2">
        <div>
          <label class="label">Coluna</label>
          <input
            type="text"
            class="input"
            formControlName="bed_column"
            placeholder="Coluna"
          />
          <small
            *ngIf="
              form.get('bed_column')?.touched &&
              form.get('bed_column')?.hasError('required')
            "
            >Obrigatório.</small
          >
          <small
            *ngIf="
              form.get('bed_column')?.touched &&
              form.get('bed_column')?.hasError('maxlength')
            "
            >Máx 10 caracteres.</small
          >
        </div>

        <div>
          <label class="label">Numero-coluna</label>
          <input
            type="number"
            class="input"
            formControlName="number"
            placeholder="Numero-coluna"
          />
          <small
            *ngIf="
              form.get('number')?.touched &&
              form.get('number')?.hasError('required')
            "
            >Obrigatório.</small
          >
          <small
            *ngIf="
              form.get('number')?.touched && form.get('number')?.hasError('max')
            "
            >Máximo 10.</small
          >
        </div>
      </div>
      <label class="label">Planta de Origem</label>
      <input
        type="text"
        class="input"
        formControlName="source_crop_id"
        placeholder="Planta de Origem"
      />

      <label class="label">Produção Ciclo Grama</label>
      <input
        type="number"
        class="input"
        formControlName="production_cycle_grams"
        placeholder="Produção Ciclo Grama"
      />
      <small
        *ngIf="
          form.get('production_cycle_grams')?.touched &&
          form.get('production_cycle_grams')?.hasError('min')
        "
        >Mínimo 0.</small
      >

      <label class="label">Notas</label>
      <textarea
        class="textarea"
        formControlName="notes"
        placeholder="Notas"
      ></textarea>

      <div class="mt-6 flex gap-2">
        <button
          type="submit"
          class="btn btn-primary flex-1"
          [disabled]="form.invalid"
        >
          Salvar
        </button>
        <button
          type="button"
          class="btn flex-1"
          onclick="modal_add_crops.close()"
        >
          Cancelar
        </button>
      </div>
    </fieldset>
  </form>

  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>
